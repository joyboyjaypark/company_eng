# 클라우드 업로드 기능 가이드

## 개요
이전 작업 내용을 클라우드에 업로드하고 관리할 수 있는 기능이 추가되었습니다.

## 주요 기능

### 1. 클라우드 업로드
- **위치**: 메인 툴바의 "클라우드 업로드" 버튼
- **기능**: 현재 작업 중인 데이터를 클라우드에 업로드
- **지원 데이터 타입**:
  - 도면 데이터 (drawer.py의 팔레트 데이터)
  - 날씨 데이터 (asos_gui.py의 조회 결과)
  - 기타 파일

### 2. 클라우드 브라우저
- **위치**: 메인 툴바의 "클라우드 브라우저" 버튼
- **기능**: 업로드된 파일 관리
- **지원 작업**:
  - 업로드된 파일 목록 조회
  - 파일 다운로드
  - 파일 삭제
  - 타입별 필터링 (도면/날씨 데이터/기타)

## 사용 방법

### drawer.py (도형 편집기)에서 사용

1. **업로드 방법**:
   - 팔레트에 도형을 그립니다
   - 상단 툴바의 "클라우드 업로드" 버튼 클릭
   - 데이터 타입 선택 (기본값: 도면 데이터)
   - 메모 입력 (선택사항)
   - "업로드" 버튼 클릭

2. **다운로드 방법**:
   - 상단 툴바의 "클라우드 브라우저" 버튼 클릭
   - 목록에서 원하는 파일 선택
   - "다운로드" 버튼 클릭
   - 저장 위치 선택

### asos_gui.py (날씨 데이터 조회)에서 사용

1. **업로드 방법**:
   - 날씨 데이터 조회 실행
   - 하단 버튼 영역의 "클라우드 업로드" 버튼 클릭
   - 메모 입력 (선택사항)
   - "업로드" 버튼 클릭

2. **다운로드 방법**:
   - "클라우드 브라우저" 버튼 클릭
   - 필터를 "날씨 데이터"로 설정
   - 원하는 파일 선택 후 다운로드

## 저장 위치

- **기본 저장 경로**: `~/.company_eng_cloud`
- **하위 디렉토리**:
  - `drawings/`: 도면 데이터
  - `weather_data/`: 날씨 데이터
  - `other/`: 기타 파일
  - `history/`: 업로드 히스토리

## 파일 명명 규칙

업로드된 파일은 다음 형식으로 저장됩니다:
```
{타임스탬프}_{원본파일명}
예: 20260123_143022_my_drawing.json
```

## 메타데이터

각 업로드에는 다음 메타데이터가 저장됩니다:
- 업로드 ID
- 업로드 시간
- 원본 파일 경로
- 클라우드 파일 경로
- 파일명
- 데이터 타입
- 파일 크기
- 사용자 메모

## 주의사항

1. **로컬 저장소**: 현재 구현은 로컬 디렉토리를 클라우드 저장소로 시뮬레이션합니다.
2. **파일 크기**: 대용량 파일 업로드 시 시간이 소요될 수 있습니다.
3. **백업**: 중요한 데이터는 주기적으로 별도 백업하는 것을 권장합니다.

## 향후 확장 가능성

현재 구현은 로컬 저장소를 사용하지만, 다음과 같은 클라우드 서비스로 확장 가능합니다:
- AWS S3
- Google Cloud Storage
- Azure Blob Storage
- 기타 클라우드 스토리지 서비스

## 문제 해결

### 업로드가 실패하는 경우
1. 저장 경로 권한 확인
2. 디스크 공간 확인
3. 파일이 다른 프로그램에서 사용 중인지 확인

### 다운로드가 실패하는 경우
1. 대상 경로에 쓰기 권한이 있는지 확인
2. 파일명 충돌 확인
3. 클라우드 파일이 삭제되지 않았는지 확인

## API 참조

### CloudStorage 클래스

```python
from cloud_storage import get_cloud_storage

# 싱글톤 인스턴스 가져오기
storage = get_cloud_storage()

# 파일 업로드
result = storage.upload_file(
    source_path="path/to/file.json",
    data_type="drawing",
    metadata={"memo": "My drawing"}
)

# 업로드 목록 조회
uploads = storage.list_uploads(data_type="drawing", limit=50)

# 파일 다운로드
storage.download_file(upload_id, dest_path)

# 파일 삭제
storage.delete_upload(upload_id)

# 스토리지 정보 조회
info = storage.get_storage_info()
```

## 버전 정보

- **버전**: 1.0
- **추가 날짜**: 2026-01-23
- **작성자**: GitHub Copilot
